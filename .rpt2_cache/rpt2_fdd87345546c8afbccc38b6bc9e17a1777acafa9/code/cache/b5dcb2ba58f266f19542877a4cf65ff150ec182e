{
  "code": "export default class ScrollView extends Laya.Box {\r\n    constructor() {\r\n        super();\r\n        this._hadRender = false;\r\n        this._hadInit = false;\r\n        this._hadInitItem = false;\r\n        this._isSensitive = true;\r\n        this._leftAlign = 0;\r\n        this._rightAlign = 0;\r\n        this.space = 0;\r\n        this.mouseEnabled = true;\r\n        this.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        this.on(Laya.Event.MOUSE_UP, this, this.mouseUp, [Laya.Event.MOUSE_UP]);\r\n        this.on(Laya.Event.MOUSE_MOVE, this, this.mouseMove);\r\n        this.on(Laya.Event.MOUSE_OUT, this, this.mouseUp, [Laya.Event.MOUSE_OUT]);\r\n    }\r\n    set array(arr) {\r\n        this._array = arr;\r\n        this.init();\r\n    }\r\n    get array() {\r\n        return this._array;\r\n    }\r\n    set itemRender(itemRender) {\r\n        this._itemRender = itemRender;\r\n        this.init();\r\n    }\r\n    set renderHandler(hander) {\r\n        this._renderHandler = hander;\r\n        this.init();\r\n    }\r\n    set mouseHandler(hander) {\r\n        this._mouseHandler = hander;\r\n    }\r\n    set selectHandler(hander) {\r\n        this._selectHandler = hander;\r\n    }\r\n    set cellWidth(cellWidth) {\r\n        this._cellWidth = cellWidth;\r\n    }\r\n    get cellWidth() {\r\n        return this._cellWidth;\r\n    }\r\n    set cellHeight(cellHeight) {\r\n        this._cellHeight = cellHeight;\r\n    }\r\n    get cellHeight() {\r\n        return this._cellHeight;\r\n    }\r\n    set leftAlign(leftAlign) {\r\n        this._leftAlign = leftAlign;\r\n    }\r\n    get leftAlign() {\r\n        return this._leftAlign;\r\n    }\r\n    set rightAlign(rightAlign) {\r\n        this._rightAlign = rightAlign;\r\n    }\r\n    get rightAlign() {\r\n        return this._rightAlign;\r\n    }\r\n    addItem() {\r\n    }\r\n    getItemByIndex(index) {\r\n        return this._cells[index];\r\n    }\r\n    getItemIndex(cell) {\r\n        for (var i = 0; i < this._cells.length; i++) {\r\n            if (cell == this._cells[i]) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    init() {\r\n        if (!this._hadInit) {\r\n            this.initItems();\r\n            this.initRender();\r\n            if (this._hadInitItem && this._hadRender) {\r\n                this._hadInit = true;\r\n            }\r\n        }\r\n    }\r\n    onCellEvent(event, cell) {\r\n        var index = this.getItemIndex(cell);\r\n        if (index == -1) {\r\n            return;\r\n        }\r\n        if (this._selectHandler) {\r\n            this._selectHandler.runWith([event, index]);\r\n        }\r\n    }\r\n    initItems() {\r\n        if (!this._hadInitItem && this._itemRender != null && this._array != null && this._array.length > 0) {\r\n            this._cells = new Array();\r\n            for (var i = 0; i < this._array.length; i++) {\r\n                let item = new this._itemRender(this._cellWidth, this._cellHeight);\r\n                this._cells.push(item);\r\n                this.addChild(item);\r\n            }\r\n            this._hadInitItem = true;\r\n            this.refreshCellsPos();\r\n        }\r\n    }\r\n    initRender() {\r\n        if (!this._hadRender && this._renderHandler != null && this._array != null && this._array.length > 0) {\r\n            for (var i = 0; i < this._array.length; i++) {\r\n                this._renderHandler.runWith([this._cells[i], i]);\r\n            }\r\n            this._hadRender = true;\r\n        }\r\n    }\r\n    doSingleRender(index) {\r\n        if (!this._hadRender) {\r\n            this.initRender();\r\n            return;\r\n        }\r\n        if (this._renderHandler != null) {\r\n            this._renderHandler.runWith([this._cells[index], index]);\r\n        }\r\n    }\r\n    refreshCellsPos() {\r\n        var cellCount = this._cells.length;\r\n        for (var i = 0; i < cellCount; i++) {\r\n            let cell = this._cells[i];\r\n            let posX = this.getCellPosByIndex(i);\r\n            cell.pos(posX, this.height / 2);\r\n        }\r\n        this.width = this._leftAlign + cellCount * this._cellWidth + (cellCount - 1) * this.space + this._rightAlign;\r\n    }\r\n    getCellPosByIndex(index) {\r\n        return this._leftAlign + (index + 0.5) * this._cellWidth + index * this.space;\r\n    }\r\n    mouseDown() {\r\n        if (this._mouseHandler != null) {\r\n            var e = new Event(Laya.Event.MOUSE_DOWN);\r\n            this._mouseHandler.runWith([e]);\r\n        }\r\n    }\r\n    mouseUp(event) {\r\n        if (this._mouseHandler != null) {\r\n            var e = new Event(Laya.Event.MOUSE_UP);\r\n            this._mouseHandler.runWith([e]);\r\n        }\r\n    }\r\n    mouseMove() {\r\n        if (this._mouseHandler != null) {\r\n            var e = new Event(Laya.Event.MOUSE_MOVE);\r\n            this._mouseHandler.runWith([e]);\r\n        }\r\n    }\r\n}\r\n",
  "references": []
}
